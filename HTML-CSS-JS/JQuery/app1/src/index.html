<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible"
        content="IE=edge">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css"
        integrity="sha512-GQGU0fMMi238uA+a/bdWJfpUGKUkBdgfFdgBm72SUQ6BeyWjoY/ton0tEjH+OSH9iP4Dfh+7HM0I9f5eR0L/4w=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer" />

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer" />

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.css"
        integrity="sha512-6S2HWzVFxruDlZxI3sXOZZ4/eJ8AcxkQH1+JjSe/ONCEqR9L4Ysq5JdT5ipqtzU7WHalNwzwBv+iE51gNHJNqQ=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.min.js"
        integrity="sha512-pax4MlgXjHEPfCwcJLQhigY7+N8rt6bVvWLFyUMuxShv170X53TRzGPmPkZmGBhk+jikR8WBM4yl7A9WMHHqvg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js"
        integrity="sha512-lbwH47l/tPXJYG9AcFNoJaTMhGvYWhVM9YI43CT+uteTRRaiLCui8snIgyAN8XWgNjNhCqlAUdzZptso6OCoFQ=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>

</head>

<body>
    <div class="container-fluid">
        <!-- .row>.col-4*3>p>lorem55 -->

        <div class="row p-4">

            <div class="col">
                <!-- Col 1 - Caption -->
                <div class="row">
                    <div class="col">
                        <h2 class="text-center">
                            <i class="fa-solid fa-list me-2"></i>Item List
                        </h2>
                        <hr>
                    </div>
                </div>
                <!-- / Col 1 - Caption -->

                <div class="row">
                    <div class="col">
                        <div class="text-end mb-3">
                            <button class="btn btn-warning btn-sm" onclick="btnSelectAll()">Select All</button>
                        </div>
                        <ul id="mylist"
                            class="list-group">
                            <li class="list-group-item">
                                <div class="alert alert-info">Listede herhangi bir veri bulunmuyor.</div>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>

            <div class="col">
                <!-- Col 2 - Caption -->
                <div class="row">
                    <div class="col">
                        <h2 class="text-center">
                            <i class="fa-solid fa-pen-to-square me-2"></i>Create, Edit Item
                        </h2>
                        <hr>
                    </div>
                </div>
                <!-- / Col 2 - Caption -->

                <div class="row">
                    <div class="col">
                        <div class="mb-3">
                            <label for="name"
                                class="form-label">Name Surname</label>
                            <input type="text"
                                class="form-control"
                                id="name"
                                placeholder="john doe">
                        </div>
                        <div class="mb-3">
                            <label for="phone"
                                class="form-label">Phone</label>
                            <input type="text"
                                class="form-control"
                                id="phone"
                                placeholder="0555 888 77 66">
                        </div>
                        <div class="mb-3 text-end">
                            <button type="button"
                                id="btnCreate"
                                onclick="btnCreateClicked()"
                                class="btn btn-primary btn-sm"><i
                                    class="fa-solid fa-circle-plus me-2"></i>Create</button>
                            <button type="button"
                                id="btnSave"
                                onclick="btnSaveClicked()"
                                class="btn btn-secondary btn-sm"><i
                                    class="fa-solid fa-floppy-disk me-2"></i>Save</button>
                        </div>
                    </div>
                </div>

            </div>

        </div>

    </div>

    <script>

        toastr.options = {
            "closeButton": true,
            "debug": false,
            "newestOnTop": true,
            "progressBar": true,
            "positionClass": "toast-bottom-left",
            "preventDuplicates": false,
            "onclick": null,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "5000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        }

        var counter = 0;
        var list = [];

        // $("#btnCreate").click(function(){

        // });

        function btnSelectAll(){

            var items = $("#mylist li");

            for (var i = 0; i < items.length; i++){
                var li = items[i];

                var el = $(li).find(".fa-circle-check");
                el.toggleClass("fa-solid");
                el.toggleClass("fa-regular");

                var id = $(li).data("id");

                for (var k = 0; k < list.length; k++) {
                    var obj = list[k];

                    if (obj.id == id) {
                        obj.isselected = true;
                        break;
                    }
                }
            }

            toastr["warning"]("Tüm kayıtlar seçildi.", "İşlem Detayı");

            console.log(list);
        }

        function btnCreateClicked() {
            var _name = $("#name").val();
            var _phone = $("#phone").val();

            var item = {
                id: counter,
                namesurname: _name,
                phone: _phone,
                isselected: false
            };

            counter++;

            list.push(item);
            // console.log(list);

            toastr["success"]("Yeni kayıt eklendi.", "İşlem Detayı");

            loadData();
        }

        function loadData() {
            var ul = $("#mylist");
            ul.empty();

            for (var i = 0; i < list.length; i++) {
                var item = list[i];

                var li = `<li class="list-group-item" data-id="${item.id}">
                    <i class="fa-${item.isselected ? "solid" : "regular"} fa-circle-check me-2" onclick="itemSelect(this, ${item.id})"></i>
                    <i class="fa-solid fa-trash me-2" onclick="itemDelete(this, ${item.id})"></i>
                    ${item.namesurname} - ${item.phone}</li>`;

                ul.append(li);
            }
        }

        function itemSelect(el, id) {
            // console.log("element",el, "id",id);
            $(el).toggleClass("fa-solid");
            $(el).toggleClass("fa-regular");

            for (var k = 0; k < list.length; k++) {
                var obj = list[k];

                if (obj.id == id) {
                    obj.isselected = true;
                    break;
                }
            }

            toastr["info"]("Kayıt seçildi.", "İşlem Detayı");

            // console.log(list);
        }

        function itemDelete(el, id) {
            var result = confirm("Kaydı silmek istediğinize emin misiniz?");

            if (result == false) {
                return;
            }

            for (var k = 0; k < list.length; k++) {
                var obj = list[k];

                if (obj.id == id) {
                    list.splice($.inArray(obj, list), 1);
                    break;
                }
            }

            toastr["error"]("Kayıt Silindi.", "İşlem Detayı");

            loadData();
        }

        function btnSaveClicked() {
            var selected = $("li i.fa-solid.fa-circle-check");

            var _name = $("#name").val();
            var _phone = $("#phone").val();

            for (var i = 0; i < selected.length; i++) {
                var item = selected[i];
                var li = $(item).parent();
                var id = li.data("id");

                for (var k = 0; k < list.length; k++) {
                    var obj = list[k];

                    if (obj.id == id) {
                        obj.namesurname = _name;
                        obj.phone = _phone;
                        break;
                    }
                }

                // console.log(li.attr("data-id"));
                // console.log();
            }

            toastr["warning"]("Kayıt(lar) güncellendi.", "İşlem Detayı");

            loadData();
        }

    </script>


</body>

</html>